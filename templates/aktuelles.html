<link rel="stylesheet" href="{{ url_for('static', filename='banner.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='body.css') }}">
<style>
    .page-body{
        position: absolute;
        width: 100%;
        height: 90%;
        top: 100px;
        right: 0;
        left: 0;
        bottom: 0;
        border: none;
        background-color: transparent;
    }

    .rounded-top-banner {
        position: absolute;
        margin-top: 20px;
        height: 50px;
        width: 90%;
        border-radius: 25px;
        left: 5%;
        background-color: lightslategray;
        color: white;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .centered-text {
        text-align: center;
        font-weight: bold;
        font-size: 30px;
        padding-top: 10px;
    }

    .calendar-parent {
        width: 500px;
        height: 450px;
        background-color: lightskyblue;
        border-radius: 15px;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .calendar-banner {
        display: grid;
        grid-template-columns: auto auto auto;
        background-color: white;
        height: 50px;
        width: 100%;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        border:none;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .calendar-banner-change-button {
        margin-top: 5px;
        width:40px;
        height:40px;
        border-radius: 20px;
        background-color: white;
    }
    .calendar-banner-change-button:hover {
        background-color: lightgray;
    }
    .calendar-banner-change-span {
        position: absolute;
        margin-top: -22px;
        margin-left: -13px;
        color: black;
        font-size: 30px;
    }
    .calendar-banner-center-button {
        background-color: transparent;
        border: none;
        width: 400px;
        height: 50px;
        font-size: 30px;
        font-weight: bold;
    }
    .calendar-banner-center-button:hover {
        text-decoration-line: underline;
    }
    .calendar-cell-parent {
        display: grid;
        grid-template-columns: auto auto auto auto auto auto auto;
        height: 400px;
        width: 100%;
    }
    .calendar-cell-border {
        margin-top: 7px;
        margin-left: 7px;
        width: 55px;
        height: 55px;
        background-color: white;
        border-radius: 17.5px;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .calendar-cell {
        margin-left: 2.5px;
        width: 50px;
        height: 50px;
        background-color: lightskyblue;
        border-radius: 15px;
    }
    .calendar-cell:hover {
        background-color: cornflowerblue;
    }
    .calendar-cell-selected {
        margin-left: 2.5px;
        width: 50px;
        height: 50px;
        border-radius: 15px;
        background-color: deepskyblue;
    }
    .calendar-cell-selected:hover {
        background-color: cornflowerblue;
    }
    .calendar-cell-number {
        margin-top: 5px;
        margin-left: 5px;
        font-size: 15px;
        font-weight: bold;
    }
    .calendar-cell-event {
        background: none;
        border: none;
        color: yellow;
        font-size: 30px;
        font-weight: bold;
        width: 100%;
        margin-bottom: 10px;
    }

    .calendar-event-parent {
        width: 300px;
        height: 450px;
        background-color: lightskyblue;
        border-radius: 15px;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .calendar-event-banner {
        width:100%;
        height:50px;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        background-color: white;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .calendar-event-banner-text {
        height: 50px;
        width:100%;
        background-color: transparent;
        border:none;
        font-size: 15px;
        font-weight: bold;
    }
    .calendar-event-banner-date {
        height: 50px;
        width:100%;
        background-color: transparent;
        border:none;
        font-size: 30px;
        font-weight: bold;
    }
    .calendar-event-info-parent {
        width:100%;
        height: 400px;
        border-bottom-left-radius: 15px;
        border-bottom-right-radius: 15px;
    }

    .notifications-parent {
        width: 350px;
        height: 450px;
        border-radius: 15px;
        background-color: lightskyblue;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .notifications-banner {
        background-color: white;
        width: 100%;
        height: 50px;
        border-top-left-radius: 15px;
        border-top-right-radius: 15px;
        border: none;
        font-size: 30px;
        font-weight: bold;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
    }
    .notifications-body {
        width: 100%;
        height: 400px;
        border-bottom-left-radius: 15px;
        border-bottom-right-radius: 15px;
    }
    .notifications-element {
        width: 300px;
        height: 100px;
        padding: 10px;
        margin-top: 5px;
        margin-left: 15px;
        background-color: cornflowerblue;
        box-shadow: 0px 5px 5px rgba(0, 0, 0, 0.1);
        border-color: lightgray;
        border-style: solid none;
        border-radius: 15px;
    }

    .element-grid {
        padding-left: 25px;
        margin-top: 90px;
        display: grid;
        grid-template-columns: auto auto auto;
    }
</style>

<body>
    <div class="page-body">
        <div class="rounded-top-banner">
            <div class="centered-text">
                Welcome to a better version of the IHK Trainex Website!
            </div>
        </div>
        <div class="element-grid">
            <div class="calendar-parent">
                <div class="calendar-banner">
                    <button class="calendar-banner-change-button" style="transform:rotate(180deg); margin-left: 5px;">
                        <span class="calendar-banner-change-span">
                            &#10148
                        </span>
                    </button>
                    <button class="calendar-banner-center-button">
                        January 2024
                    </button>
                    <button class="calendar-banner-change-button">
                        <span class="calendar-banner-change-span">
                            &#10148
                        </span>
                    </button>
                </div>
            <div id="calendarParent" class="calendar-cell-parent"></div>
            </div>
            <div class="calendar-event-parent">
                <div class="calendar-event-banner">
                    <button id="calendarInfoBanner" class="calendar-event-banner-text">Select a day to show more information.</button>
                </div>
                <div id="calendarInfoParent" class="calendar-event-info-parent"></div>
            </div>
            <div class="notifications-parent">
                <button class="notifications-banner">
                    Notifications
                </button>
                <div id="notificationsBody" class="notifications-body"></div>
            </div>
        </div>
    </div>
    <iframe title="banner" id="banner" class="banner-frame" src="{{ url_for('main.banner') }}"></iframe>
</body>

<script>
    let banner = null;
    window.onmessage = function(e){
        if(e.data == 'id'){
            banner = document.getElementById("banner").contentWindow.postMessage("aktuelles", "*");
        }   
    }

    for(let i = 1; i < 32; i++) {
        let calendarCell = "<div class='calendar-cell-border'><div class='calendar-cell' onClick='showEvent(this, " + i + ")'><div class='calendar-cell-number'>" + i + "</div>";
        if (Math.random() > 0.5){
            if(Math.random() > 0.75){
                calendarCell += "<button class='calendar-cell-event' style='color:yellow;'>!</button>";
            }else{
                calendarCell += "<button class='calendar-cell-event' style='color:red;'>!</button>";
            }
        }
        calendarCell += "</div></div>";
        document.getElementById("calendarParent").innerHTML += calendarCell;
    }

    let currentlySelected;
    let eventInfoParent = document.getElementById("calendarInfoParent");
    let eventInfoBanner = document.getElementById("calendarInfoBanner");

    function showEvent(button, id){
        if(currentlySelected){
            currentlySelected.className = "calendar-cell";
        }
        button.className = "calendar-cell-selected";
        currentlySelected = button;
        eventInfoParent.innerHTML = "Showing some surely very important Info for Day " + id + "!";
        eventInfoBanner.innerHTML = id + ".01.2024";
        eventInfoBanner.className = "calendar-event-banner-date";
    }

    let notificationsBody = document.getElementById("notificationsBody");

    notificationsBody.innerHTML += "<div class='notifications-element'>This is a test notification!</div>"
    notificationsBody.innerHTML += "<div class='notifications-element'>This is a second test notification!</div>"
    notificationsBody.innerHTML += "<div class='notifications-element'>This is the last test notification!</div>"

    console.log(document.cookie);
</script>